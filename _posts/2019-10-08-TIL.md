---
layout: post
title:  "[TIL] 2019-10-08"
date:   2019-10-08 22:00:00
author: Seong-Kyu Yun
categories: [Today I Learned]














---

------

# Today I Learned (2019.10.08)







------

## ● EL & JSTL







------

#### 1.  JSTL Formatting Tags

------



------

##### 1-1) JSTL Formatting Tags

------



------

##### 1) &#60;fmt:timeZone&#62; 

------

- **특정 지역을 설정하여 통화 기호나 시간 대역을 다르게 표현한다.**

- **각 지역의 timeZone 정보는 아래의 링크를 참고하자.**

  **https://en.wikipedia.org/wiki/List_of_tz_database_time_zones**

- **사용 예**

```jsp
<c:set var="now" value="<%= new java.util.Date() %>"/>
<fmt:timeZone value="America/New_York">
뉴욕 : <fmt:formatDate value="${ now }" type="both" dateStyle="full" timeStyle="full"/>
</fmt:timeZone>
<br>
<fmt:timeZone value="Europe/London">
런던 : <fmt:formatDate value="${ now }" type="both" dateStyle="full" timeStyle="full"/>
</fmt:timeZone>
```





------

##### 2) &#60;fmt:setTimeZone&#62; 

------

- **fmt:timeZone과 동일하나, 시작과 끝 태그에 영향을 미치는 것이 아닌, **

  **선언한 이후의 모든 태그에 영향을 미친다.**

- **사용 예**

```jsp
<c:set var="now" value="<%= new java.util.Date() %>"/>
<fmt:setTimeZone value="America/New_York" />
뉴욕 : <fmt:formatDate value="${ now }" type="both" dateStyle="full" timeStyle="full"/>
<br>
<fmt:setTimeZone value="Europe/London" />
런던 : <fmt:formatDate value="${ now }" type="both" dateStyle="full" timeStyle="full"/>
```





------

##### 3) &#60;fmt:parseNumber&#62; 

------

- **특정 문자열을 값으로 받아 원하는 방식의 숫자 표현으로 변환 시킨다.**
- **사용 예**

```jsp
<c:set var = "balance" value = "123000.123" />
<fmt:parseNumber var = "i" type = "number" value = "${balance}" />
<p>숫자 변환 테스트 1 : ${i}</p> <!-- 123000.123 -->
<fmt:parseNumber var = "i" integerOnly = "true"
type = "number" value = "${balance}" />
<p>숫자 변환 테스트 2 : ${i}</p> <!-- 123000 -->
```





------

##### 4) &#60;fmt:parseNumber&#62; 속성 정리

------

<table border="1">
    <tr style="background-color: rgb(220,230,242);">
        <th>속성 명</th>
        <th>설 명</th>
        <th>필수 여부</th>
    </tr>
    <tr>
        <th>value</th>
        <td>숫자 변환에 사용할 데이터 선언</td>
        <td>No</td>
    </tr>
    <tr>
        <th>type</th>
        <td>표시할 타입 지정(<span style="font-weight: 600">NUMBER</span>, CURRENCY, PERCENT)</td>
        <td>No</td>
    </tr>
    <tr>
        <th>parseLocale</th>
        <td>변환할 숫자에 따른 지역 선언</td>
        <td>No</td>
    </tr>
    <tr>
        <th>integerOnly</th>
        <td>소수점 자리를 무시한 정수 영역만 변환하여 표시</td>
        <td>No</td>
    </tr>
    <tr>
        <th>pattern</th>
        <td>변환한 숫자를 표현할 특정 스타일 지정</td>
        <td>No</td>
    </tr>
    <tr>
        <th>var</th>
        <td>변환한 숫자 데이터를 담을 변수 선언</td>
        <td>No</td>
    </tr>
    <tr>
        <th>scope</th>
        <td>var에 담은 변수를 저장할 영역 설정( 기본은 page )</td>
        <td>No</td>
    </tr>
</table>





------

##### 5) &#60;fmt:formatDate&#62; 

------

- **날짜나 시간의 포맷방식을 지정하여 화면에 보여줄 때 사용한다.**

- **value 속성으로는 java.util.Date() 객체를 사용해야 한다.**

- **사용 예**

```jsp
<c:set var="Date" value="<%=new java.util.Date()%>" />

날짜 포맷 태그 사용 :
<fmt:formatDate type="time" value="${Date}" /> 
```





------

##### 6) &#60;fmt:formatDate&#62;  속성 정리

----

<table border="1">
    <tr style="background-color: rgb(220,230,242);">
        <th>속성 명</th>
        <th>설 명</th>
        <th>필수 여부</th>
    </tr>
    <tr>
        <th>value</th>
        <td>원하는 날짜, 시간으로 표시하기 위한 데이터</td>
        <td>Yes</td>
    </tr>
    <tr>
        <th>type</th>
        <td>표시할 타입 지정(TIME, <span style="font-weight: 600">DATE</span>, BOTH)</td>
        <td>No</td>
    </tr>
    <tr>
        <th>pattern</th>
        <td>화면에 표현할 데이터 스타일을 지정하며, 패턴은<br/>
java.text.DateFormat 클래스의 방식을 따름</td>
        <td>No</td>
    </tr>
    <tr>
        <th>dateStyle</th>
        <td>날짜에 대해 표현할 스타일을 정의<br/>
Default, short, medium, long, full</td>
        <td>No</td>
    </tr>
    <tr>
        <th>timeStyle</th>
        <td>시간에 대해 표현할 스타일을 정의<br/>
Default, short, medium, long, full</td>
        <td>No</td>
    </tr>
    <tr>
        <th>timeZone</th>
        <td>지역에 따른 시간을 설정할 때 사용하며 이때 사용되는<br/>
값은 <fmt:setTimeZone> 의 timeZone 객체.</td>
        <td>No</td>
    </tr>
    <tr>
        <th>var</th>
        <td>변환된 날짜 데이터를 담을 변수 생성</td>
        <td>No</td>
    </tr>
     <tr>
        <th>scope</th>
        <td>var에 담은 변수를 저장할 영역 설정( 기본은 page )</td>
        <td>No</td>
    </tr>
</table>





- **Date Style 별 표현 방식**

<table border="1">
    <tr style="background-color: rgb(220,230,242);">
        <th>속성 명</th>
        <th>설 명</th>
    </tr>
    <tr>
    	<td>DEFAULT</td>
        <td>2018. 1. 31</td>
    </tr>
    <tr>
    	<td>SHORT</td>
        <td>18. 1. 31</td>
    </tr>
    <tr>
    	<td>MEDIUM</td>
        <td>2018. 1. 31</td>
    </tr>
    <tr>
    	<td>LONG</td>
        <td>2018년 1월 31일 (수)</td>
    </tr>
    <tr>
    	<td>FULL</td>
        <td>2018년 1월 31일 수요일</td>
    </tr>
</table>



- **Time Style 별 표현 방식**

<table border="1">
    <tr style="background-color: rgb(220,230,242);">
        <th>속성 명</th>
        <th>설 명</th>
    </tr>
    <tr>
    	<td>DEFAULT</td>
        <td>오전 1:10:00</td>
    </tr>
    <tr>
    	<td>SHORT</td>
        <td>1:10</td>
    </tr>
    <tr>
    	<td>MEDIUM</td>
        <td>오전 1:10:00</td>
    </tr>
    <tr>
    	<td>LONG</td>
        <td>오전 1시 10분 00초</td>
    </tr>
    <tr>
    	<td>FULL</td>
        <td>오전 1시 10분 00초 KST</td>
    </tr>
</table>



- **type 지정 방식에 따라 날짜, 시간, 둘 모두를 표시할 수 있고, **

  **dateStyle, timeStyle 속성으로 보여줄 포맷의 표기 방식을 설정할 수 있다.**

- **사용 예**

```jsp
<fmt:formatDate type="time" value="${Date}" /> <br> 오전 4:40:52
<fmt:formatDate type="date" value="${Date}" /> <br> 2018. 1. 10
<fmt:formatDate type="both" value="${Date}" /> <br> 2018. 1. 10 오전 4:40:52
<fmt:formatDate type="both" dateStyle="short" timeStyle="short" value="${Date}" /> <br>
18. 1. 10 오전 4:40
<fmt:formatDate type="both" dateStyle="medium" timeStyle="medium" value="${Date}" />
<br> 2018. 1. 10 오전 4:40:52
<fmt:formatDate type="both" dateStyle="long" timeStyle="long" value="${Date}" /> <br>
2018년 1월 10일 (수) 오전 4시 40분 52초
```



------

##### 7) &#60;fmt:formatDate&#62;  예제

------

- **dateFormat.jsp - views/fmt**

```jsp
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>날짜 표현식</title>
</head>
<body>
	<h3>기본날짜 표현</h3>
	<c:set var="now" value="<%=new java.util.Date() %>"/>
	<pre>
날짜 표현은 fmt:formatDate 태그를 이용
속성 : value, type
value : 날짜 값이 대입
type : 날짜표현방식결정(날짜, 시간, 둘 다)
	</pre>
	<p>기본출력 : <fmt:formatDate value="${now }"/></p>
	<p>type time : <fmt:formatDate value="${now }" type="time"/></p>
	<p>type both : <fmt:formatDate value="${now }" type="both"/></p>
	
	<h3>패턴을 이용한 날짜 출력</h3>
	<p>패턴1 : <fmt:formatDate value="${now }" pattern="yyyy년 MM월 dd일"/>
	<p>패턴2 : <fmt:formatDate value="${now }" pattern="E요일 a hh시 mm분 ss초"/>
	
	<h3>dateStyle 속성</h3>
	<p>날짜에 대해 기본패턴을 정해놓은 것을 사용</p>
	<p>defalut : <fmt:formatDate value="${now }" dateStyle="default"/></p>
	<p>short : <fmt:formatDate value="${now }" dateStyle="short"/></p>
	<p>long : <fmt:formatDate value="${now }" dateStyle="long"/></p>
	<p>full : <fmt:formatDate value="${now }" dateStyle="full"/></p>
	
	<h3>timeStyle 속성</h3>
	<p>시간에 대해 기본패턴을 정해놓은 것</p>
	<p>short : <fmt:formatDate value="${now }" type="both" timeStyle="short"/></p> <!-- type을 지정해야 시간이 출력 -->
	<p>medium : <fmt:formatDate value="${now }" type="both" timeStyle="medium"/></p>
	<p>long : <fmt:formatDate value="${now }" type="both" timeStyle="long"/></p>
	<p>full : <fmt:formatDate value="${now }" type="both" timeStyle="full"/></p>
	
	<h3>시간 timezone</h3>
	<fmt:timeZone value="GMT">
		<p><fmt:formatDate value="${now }" type="both"/></p>
	</fmt:timeZone> <!-- 런던 -->
	<fmt:timeZone value="GMT+9">
		<p><fmt:formatDate value="${now }" type="both"/></p>
	</fmt:timeZone>
	<p>날짜를 출력하면 한글 -> locale을 기준으로 설정됨</p>
	<fmt:setLocale value="en_US"/>
	<fmt:timeZone value="GMT+9">
		<p><fmt:formatDate value="${now }" type="both"/></p>
	</fmt:timeZone>
</body>
</html>
```



- **출력 결과**

```code
기본날짜 표현
날짜 표현은 fmt:formatDate 태그를 이용
속성 : value, type
value : 날짜 값이 대입
type : 날짜표현방식결정(날짜, 시간, 둘 다)
	
기본출력 : 2019. 10. 8

type time : 오후 5:44:32

type both : 2019. 10. 8 오후 5:44:32

패턴을 이용한 날짜 출력
패턴1 : 2019년 10월 08일

패턴2 : 화요일 오후 05시 44분 32초

dateStyle 속성
날짜에 대해 기본패턴을 정해놓은 것을 사용

defalut : 2019. 10. 8

short : 19. 10. 8

long : 2019년 10월 8일 (화)

full : 2019년 10월 8일 화요일

timeStyle 속성
시간에 대해 기본패턴을 정해놓은 것

short : 2019. 10. 8 오후 5:44

medium : 2019. 10. 8 오후 5:44:32

long : 2019. 10. 8 오후 5시 44분 32초

full : 2019. 10. 8 오후 5시 44분 32초 KST

시간 timezone
2019. 10. 8 오전 8:44:32

2019. 10. 8 오후 5:44:32

날짜를 출력하면 한글 -> locale을 기준으로 설정됨

Oct 8, 2019 5:44:32 PM
```







------

##### 8) &#60;fmt:parseDate&#62;  

---

- **문자열로 표시된 날짜 및 시간 값을 java.util.Date로 변환하여
  화면에 표시할 때 사용한다.**

- **사용 예**

```jsp
<fmt:parseDate value = "2018-01-01 01:00:00"
pattern = "yyyy-MM-dd HH:mm:ss" var = "date"/>
<p> ${date} </p> <!-- 2018-01-01 01:00:00 -->
```







------

##### 9) &#60;fmt:parseDate&#62;  속성 정리

---

<table border="1">
    <tr style="background-color: rgb(220,230,242);">
        <th>속성 명</th>
        <th>설 명</th>
        <th>필수 여부</th>
    </tr>
    <tr>
        <th>value</th>
        <td>원하는 날짜, 시간으로 표시하기 위한 데이터</td>
        <td>Yes</td>
    </tr>
    <tr>
        <th>type</th>
        <td>표시할 타입 지정(TIME, <span style="font-weight: 600">DATE</span>, BOTH)</td>
        <td>No</td>
    </tr>
    <tr>
        <th>pattern</th>
        <td>화면에 표현할 데이터 스타일을 지정하며, 패턴은<br/>
java.text.DateFormat 클래스의 방식을 따름</td>
        <td>No</td>
    </tr>
    <tr>
        <th>dateStyle</th>
        <td>날짜에 대해 표현할 스타일을 정의<br/>
Default, short, medium, long, full</td>
        <td>No</td>
    </tr>
    <tr>
        <th>timeStyle</th>
        <td>시간에 대해 표현할 스타일을 정의<br/>
Default, short, medium, long, full</td>
        <td>No</td>
    </tr>
    <tr>
        <th>timeZone</th>
        <td>지역에 따른 시간을 설정할 때 사용하며 이때 사용되는<br/>
값은 <fmt:setTimeZone> 의 timeZone 객체.</td>
        <td>No</td>
    </tr>
    <tr>
        <th>var</th>
        <td>변환된 날짜 데이터를 담을 변수 생성</td>
        <td>No</td>
    </tr>
     <tr>
        <th>scope</th>
        <td>var에 담은 변수를 저장할 영역 설정( 기본은 page )</td>
        <td>No</td>
    </tr>
</table>









------

#### 2.  JSTL Function

------



------

##### 2-1) JSTL Function 

------



------

##### 1) JSTL Function 

---

- **문자열 처리에 관한 메소드들을 EL 형식에서 사용할 수 있게 제공하는
  라이브러리로, 다른 JSTL 태그들과는 다르게 ${fn:메소드명(문자열)} 의
  형식으로 EL 태그에 직접 대입하여 사용한다.**

- **선언 방식과 사용 예**

```jsp
선언 방식 :
	<%@ taglib uri = "http://java.sun.com/jsp/jstl/functions" prefix = "fn" %>
예시 :
<c:set var = "theString" value = "I am a test String"/>

<c:if test = "${fn:contains(theString, 'test')}">
	<p>Found test string<p>
</c:if>
```







------

##### 2) JSTL Function  종류

----

<table border="1">
    <tr style="background-color: black; color:white">
        <th>함수 명</th>
        <th>설 명</th>
    </tr>
    <tr>
        <td>fn:contains(str, ‘text’)</td>
        <td>str에 두번째 인자 값의 내용이 포함되어 있는지 확인</td>
    </tr>
    <tr>
        <td>fn:containsIgnoreCase(str, ‘text')</td>
        <td>str에 대소문자 구분 없이 ‘text’값이 포함되어 있는지 확인</td>
    </tr>
    <tr>
        <td>fn:startsWith(str, ‘text’)</td>
        <td>문자열 str이 ‘text’로 시작하는지 확인</td>
    </tr>
    <tr>
        <td>fn:endsWith(str, ‘text’)</td>
        <td>문자열 str이 ‘text’로 끝나는지 확인</td>
    </tr>
    <tr>
        <td>fn:escapeXml(str)</td>
        <td>문자열 str에 xml 태그가 포함되었다면, 해당 태그까지 화면에 출력</td>
    </tr>
    <tr>
        <td>fn:indexOf(str, ＂text")</td>
        <td>str 내에 ‘text’의 첫글자 시작 위치를 반환 (0번 부터 시작한다)</td>
    </tr>
    <tr>
        <td>fn:length(str)</td>
        <td>문자열 str의 길이를 반환한다.</td>
    </tr>
    <tr>
        <td>fn:replace(str, ‘text1’, ’text2’)</td>
        <td>str 내의 text1을 찾아 text2로 변경한다.</td>
    </tr>
    <tr>
        <td>fn:substring(str, index1, index2)</td>
        <td>str에서 index1부터 index2 까지의 문자열을 반환한다.</td>
    </tr>
    <tr>
        <td>fn:split(str, ‘ ‘)</td>
        <td>str을 ‘ ‘으로 지정한 구분자를 기준으로 나눠 배열로 만들어 반환</td>
    </tr>
    <tr>
        <td>fn:join(str, ‘-’)</td>
        <td>배열요소로 나뉘어진 str을 ‘-’ 구분자를 붙여 합친 뒤 반환한다.</td>
    </tr>
    <tr>
        <td>fn:trim(str)</td>
        <td>str 값의 좌우 공백을 제거한다</td>
    </tr>
</table>





------

##### 3) JSTL Function  예제

----

- **function.jsp - views/fmt**

```jsp
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>함수</title>
</head>
<body>
	<h3>functions태그 사용하기</h3>
	<c:set var="str" value="How are you?"/>
	<p>모든문자를 대문자로 바꾸기 : ${fn:toUpperCase(str) }</p>
	<p>index번호찾기 : ${fn:indexOf(str, "are") }</p>
</body>
</html>
```



- **출력 화면**

```code
functions태그 사용하기
모든문자를 대문자로 바꾸기 : HOW ARE YOU?

index번호찾기 : 4
```







------

## ● MyBatis







------

#### 1.  Framework

------



------

##### 1-1) Framework

------



------

##### 1) Framework란?

---

- **Framework란, 개발자가 소프트웨어를 개발함에 있어 코드를
  구현하는 개발 시간을 줄이고, 코드의 재사용성을 증가시키기 위해
  일련의 클래스 묶음이나 뼈대, 틀을 제공하는 라이브러리를 구현해
  놓은 것을 말한다.**







------

##### 2) Framework의 특징

---

- **개발자가 따라야 하는 가이드를 제공한다.**

- **개발할 수 있는 범위가 정해져 있다.**

- **개발자를 위한 다양한 도구, 플러그인을 지원한다.**





------

##### 3) Framework의 장단점

----

<table>
    <tr>
        <td style="background-color: black; color:white">장 점</td>
        <td>- 개발 시간을 줄일 수 있음<br/>
            - 정형화 되어 있어 일정수준 이상의 품질을 기대할 수 있음<br/>
            - 유지 보수가 쉬움</td>
    </tr>
    <tr>
        <td style="background-color: black; color:white">단 점</td>
        <td>- 너무 의존하면 개발자들의 능력이 떨어져서<br/>
            스스로 직접 개발하는 것이 어려워짐<br/>
            - 습득에 걸리는 시간이 오래 걸림</td>
    </tr>
</table>





------

##### 4) Framework의 종류

----

<table border="1">
    <tr style="background-color: black; color: white">
        <th>구분</th>
        <th>설명</th>
        <th>종류</th>
    </tr>
    <tr>
        <th style="background-color: rgb(221, 217, 195);">영속성<br/>
            Framework</th>
        <td>데이터의 저장, 조회, 변경, 삭제를 다루
            는 클래스 및 설정 파일들을 라이브러리
            화하여 구현한 프레임워크</td>
        <td>- Mybatis<br/>
            - Hibernate</td>
    </tr>
    <tr>
        <th style="background-color: rgb(221, 217, 195);">자바<br/>
            Framework</th>
        <td>Java EE 를 통한 웹 어플리케이션 개발
            에 초점을 맞추어 필요한 요소들을 모듈
            화하여 제공하는 프레임워크</td>
        <td>- Spring Framework<br/>
            - 전자정부표준-Spring<br/>
            - Struts</td>
    </tr>
    <tr>
        <th style="background-color: rgb(221, 217, 195);">화면 구현<br/>
            Framework</th>
        <td>Front-End를 보다 쉽게 구현할 수 있게
            틀을 제공하는 프레임워크</td>
        <td>- Bootstrap<br/>
            - Foundation<br/>
            - MDL</td>
    </tr>
    <tr>
        <th style="background-color: rgb(221, 217, 195);">기능 및 지원<br/>
            Framework</th>
        <td>특정 기능이나 업무 수행에 도움을 줄
            수 있는 기능을 제공하는 프레임워크</td>
        <td>- Log4j<br/>
            - JUnit 5<br/>
            - ANT</td>
    </tr>
</table>







------

#### 2.  Mybatis

------



------

##### 2-1) Mybatis

------



------

##### 1) Mybatis란?

---

- **데이터의 입력, 조회, 수정, 삭제(<span style="color:red">CRUD</span>)를 보다 편하게 하기 위해 xml 로
  구조화한 Mapper 설정 파일을 통해서 JDBC를 구현한 영속성 프레임워크
  **
- **기존에 JDBC를 통해 구현했던 상당부분의 코드와 파라미터 설정 및 결과
  매핑을 xml 설정을 통해 쉽게 구현할 수 있게 해준다.**





------

##### 2) Mybatis API 사이트

---

- **https://mybatis.org/mybatis-3/ko/**







------

##### 3) Mybatis의 흐름

----

- **이전에 JDBC Template을 통해 SQL을 실행하였다면 Mybatis는 해당
  흐름을 전용 라이브러리를 통해 대체하여 동작한다고 생각하면 된다.**

![](C:\git\reviday.github.io\_posts\images\2019\Mybatis flow.PNG)





------

##### 2-2) Mybatis 동작구조

------

![](C:\git\reviday.github.io\_posts\images\2019\Mybatis동작구조.PNG)







------

##### 1) Mybatis 라이브러리 다운 및 연동

---

- **아래의 링크에 접속하여 Mybatis.3.4.5 버전을 다운로드 한다.**

  **https://github.com/mybatis/mybatis-3/releases**

- **다운로드가 완료되면 압축을 해제하고 mybatis-3.4.5.jar
  라이브러리를 프로젝트 내 WEB-INF/lib/ 경로 안에 추가한다.**

 





------

##### 2) ibatis와 Mybatis

---

- **기존에 Apache project 에서 ibatis를 운영하던 팀이 2010년 5월 9일에
  Google 팀으로 이동하면서 Mybatis로 이름을 바꾸었다.**

- **Mybatis는 기존의 ibatis의 한계점이었던 동적 쿼리와 어노테이션 처리를
  보강하여 더 나은 기능을 제공하고 있다.**

- **반대로 ibatis는 현재 비활성화 상태이며, 기존에 ibatis로 만들어진
  애플리케이션의 지원을 위해 라이브러리만 제공하고 있다.**







------

##### 3) ibatis와 Mybatis의 차이점

---

- **1. Java 요구 버전
  iBatis는 JDK 1.4 이상, MyBatis에서는 JDK 1.5 이상 사용이 가능하다.**

- **2.패키지 구조 변경**
  **iBatis : com.ibatis.***
  **MyBatis : org.apache.ibatis.***

- **3.사용 용어의 변경**

  **SqlMapConfig - > Configration**

  **sqlMap -> Mapper**

  **resultClass -> resultType**

- **4.동적 쿼리 지원
  Mybatis는 if, choose, trim, foreach 문을 지원한다.**

- **5.자바 어노테이션 지원**









------

##### 2-2) Mybatis-config 설정하기

------



------

##### 1) mybatis-config.xml 생성 위치

---

- **src/mybatis 폴더를 생성하고, mybatis-config.xml 파일을 등록한다.**

![](C:\git\reviday.github.io\_posts\images\2019\mybatis-config_xml등록.PNG)







------

##### 2) mybatis-config.xml 생성 작성

---

- **먼저 xml 파일 최상단에 다음과 같이 xml 형식을 지정하여 이하의 설정내용이
  mybatis 설정임을 선언한다.**

```xml
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE configuration PUBLIC
“-//mybatis.org//DTD Config 3.0//EN”
“http://mybatis.org/dtd/mybatis-3-config.dtd">
```



- **&lt;configuration&#62;최상위 태그를 작성하고 내부에 필요한 설정들을 작성하면
  된다.**

```xml
<configuration>
	. . .
</configuration>
```



- **&#60;properties&#62; 태그 ** : 외부 java property파일의 내용을 불러올 때 사용.

- **&#60;properties&#62; 태그 예시 ** 

```xml
<dataSource>
	<property name=“명칭” value=“${properties에 설정된 key명}” />
	<property name=“명칭” value=“${properties에 설정된 key명}” />
</dataSource>
```



- **&#60;settings&#62; 태그 ** : mybatis 구동 시 선언할 설정들을 작성한다.

- **&#60;settings&#62; 태그 예시 ** 

```xml
<settings>
	<!-- Null 값이 발생할 경우 빈칸이 아닌 null로 인식하라 -->
	<setting name="jdbcTypeForNull" value="NULL"/>
</settings>	
```

* ***속성값 참조 : http://www.mybatis.org/mybatis-3/ko/configuration.html**



- **&#60;typeAliases&#62; 태그 ** : mybatis에서 사용할 자료형의 별칭을 선언한다.

- **&#60;typeAliases&#62; 태그 예시 ** 

```xml
<typeAliases>
	<!-- type에는 패키지 명까지 전부 기술해주어야 한다. -->
	<typeAlias type="member.model.vo.Member" alias="Member" />
</typeAliases>
```



- **<span style="color:red">&#60;environments&#62; 태그</span> ** : mybatis 에서 연동할 Database 정보를 등록한다.

- **&#60;environments&#62; 태그 예시 ** 

```xml
<environments default="development">
	<!-- environment id를 구분하여 연결할 DB를 여러 개 구성할 수도 있다 -->
		<environment id="development">
			<transactionManager type="JDBC" />
			<dataSource type="POOLED">
				<property name="driver"
						  value="oracle.jdbc.driver.OracleDriver" />
				<property name="url"
						  value="jdbc:oracle:thin:@127.0.0.1:1521:xe" />
				<property name="username" value="student" />
				<property name="password" value="student" />
			</dataSource>
		</environment>
</environments>
```

- ***여러 개의 DB를 사용할 등록하여 사용할 수 있음**

  bulid()메소드 구현시 매개변수에 environment의 id를 설정하면 된다.



- **POOLED 와 UNPOOLED**

  Database 연결을 관리하는 DataSource의 타입은 크게 POOLED와
  UNPOOLED로 나눌 수 있는데 그 차이는 다음과 같다.

<table border="1">
    <tr style="background-color: rgb(238,236,225)">
        <th>구분</th>
        <th>POOLED</th>
        <th>UNPOOLED</th>
    </tr>
    <tr>
        <th style="background-color: rgb(238,236,225)">특징</th>
        <td>최초 Connection 객체를 생성 시
            해당 정보를 pool 영역에 저장해
            두고 이후 Connection 객체를 생
            성할 때 이를 재 사용한다.</td>
        <td>Connection 객체를 별도로 저장하지 않
            고, 객체 호출 시 매번 생성하여 사용한
            다.</td>
    </tr>
    <tr>
        <th style="background-color: rgb(238,236,225)">장점</th>
        <td>- Connection 객체를 생성하여
            Database와 연결을 구축하는데 걸
            리는 시간이 단축된다.</td>
        <td>- Connection 연결이 많지 않은 코드를
            작성할 때 간단하게 구현할 수 있다.</td>
    </tr>
    <tr>
        <th style="background-color: rgb(238,236,225)">단점</th>
        <td>- 단순한 로직을 수행하는 객체를
            만들기엔 설정해야 할 정보가 많
            다.</td>
        <td>- 매번 새로운 Connection 객체를 생성
            하므로 속도가 상대적으로 느리다.</td>
    </tr>
</table>

- **※설정 가능한 type 중<span style="color:red"> JNDI</span>도 있는데, 이는 mybatis에서 Connection 객체를
  생성하여 관리하지 않고 Web Application의 설정을 따르겠다는 의미이다.**



- **&#60;mappers&#62; 태그 ** : 사용하고자 하는 쿼리가 정의된 mapper 파일을 등록한다.

- **&#60;mappers&#62; 태그 예시 ** 

```xml
<mappers>
	<mapper resource="member/model/mapper/member-mapper.xml" />
	<mapper resource=“notice/model/mapper/notice-mapper.xml" />
	<mapper resource=“board/model/mapper/board-mapper.xml" />
</mappers>
```





------

##### 3) Mybatis내장 별칭 <small>(for parameterType / resultType)</small>

----

<table border="1"> 
    <tr style="background-color: rgb(238,236,225)">
        <th>Mybatis 타입</th>
        <th>Java 자료형</th>
        <th>Mybatis 타입</th>
        <th>Java 자료형</th>
    </tr>
    <tr>
        <td>_byte</td>
        <td>byte</td>
        <td>double</td>
        <td>Double</td>
    </tr>
    <tr>
        <td>_long</td>
        <td>long</td>
        <td>float</td>
        <td>Float</td>
    </tr>
    <tr>
        <td>_short</td>
        <td>short</td>
        <td>boolean</td>
        <td>Boolean</td>
    </tr>
    <tr>
        <td>_int / _integer</td>
        <td>int</td>
        <td>date</td>
        <td>Date</td>
    </tr>
    <tr>
        <td>_double</td>
        <td>double</td>
        <td>object</td>
        <td>Object</td>
    </tr>
    <tr>
        <td>_float</td>
        <td>float</td>
        <td>map</td>
        <td>Map</td>
    </tr>
    <tr>
        <td>_boolean</td>
        <td>boolean</td>
        <td>hashmap</td>
        <td>HashMap</td>
    </tr>
    <tr>
        <td>string</td>
        <td>String</td>
        <td>list</td>
        <td>List</td>
    </tr>
    <tr>
        <td>byte</td>
        <td>Byte</td>
        <td>arraylist</td>
        <td>ArrayList</td>
    </tr>
    <tr>
        <td>long</td>
        <td>Long</td>
        <td>collection</td>
        <td>Collection</td>
    </tr>
    <tr>
        <td>short</td>
        <td>Short</td>
        <td>iterator</td>
        <td>Iterator</td>
    </tr>
    <tr>
        <td>int / integer</td>
        <td>Integer</td>
        <td colspan="2"></td>
    </tr>
</table>









------

##### 2-3) Mapper 설정하기

------



------

##### 1) mapper.xml 생성 위치

---

- **쿼리 실행이 필요한 model의 위치에 mapper 폴더를 생성하고
  식별하기 쉬운 이름을 지어 mapper.xml 파일을 등록한다.**

![](C:\git\reviday.github.io\_posts\images\2019\mapper_xml 생성 위치.PNG)





------

##### 2) mapper.xml 작성

---

- **mapper.xml은 사용하고자 하는 쿼리나 결과로 받을 객체를 선언할 수 있다 .**

- **사용 예**

```xml
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE mapper PUBLIC"-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="Member">
    
<resultMap id="resultMember" type="Member">
<id property="id" column="ID" />
<result property="passwd" column="PASSWD" />
</resultMap>
    
<select id="memberInfo" parameterType="string"
	resultType="_int" resultMap="resultMember">
SELECT * FROM MEMBER WHERE ID = #{userid}
</select>
    
</mapper>
```

